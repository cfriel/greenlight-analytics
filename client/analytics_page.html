<template name="analytics_page">
  <div>
  <div class="col-lg-3">
    <ul id="left-navbar" class="nav nav-tabs nav-stacked">
      {{#each datasets}}
      <li>
	<a href="{{root}}/{{name}}">{{name}}</a>
      </li>
      {{/each}}
    </ul>
  </div>

  <div class="col-lg-9">
    <div id="query">    <form>
        <textarea id="code" name="code">
var dd = Greenlight.Packages.Analytics.Data;
var height = 420;

var chart = d3.select("#visualization-container").append("svg")
     .data(dd)
     .attr("class", "chart")
     .attr("width", 10*dd.length)
     .attr("height", height); 

var y = d3.scale.linear().domain([0, d3.max(dd, function(d) { return d.funding_total_usd; })]).range([0, 420]);

var x = d3.scale.linear().domain([0, dd.length]).range([0, dd.length * 5]);
 
chart.selectAll("rect")
	 .data(dd)
     .enter().append("rect")
	 .attr("y", function(d, i) { return height - y(d.funding_total_usd);})
     .attr("x", function(d, i) { return i * 10; })
	 .attr("height", function(d,i) { return y(d.funding_total_usd); })
     .attr("width", 10)
	 .attr("fill", "#056839");
	
	</textarea>
      </form>
    </div>

    <div class="tabbable"> <!-- Only required for left/right tabs -->
      <ul class="nav nav-tabs" style="margin-bottom: 0px;">
	<li class="active"><a href="#tab1" data-toggle="tab">Results</a></li>
	<li><a href="#tab2" data-toggle="tab">Visualization</a></li>
      </ul>
      <div class="tab-content tab-borders">
	<div class="tab-pane active" id="tab1">
	  <div id="analytics-container" > 
	  </div>
	</div>
	<div class="tab-pane" id="tab2">
	  <div id="visualization-container">
	  </div>
	</div>
      </div>
    </div>
  </div>
  </div>
</template>
